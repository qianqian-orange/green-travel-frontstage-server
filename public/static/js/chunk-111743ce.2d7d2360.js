(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-111743ce"],{"159b":function(t,e,i){var r=i("da84"),n=i("fdbc"),a=i("17c2"),s=i("9112");for(var c in n){var o=r[c],u=o&&o.prototype;if(u&&u.forEach!==a)try{s(u,"forEach",a)}catch(l){u.forEach=a}}},"17c2":function(t,e,i){"use strict";var r=i("b727").forEach,n=i("a640"),a=i("ae40"),s=n("forEach"),c=a("forEach");t.exports=s&&c?[].forEach:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}},2393:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var r=["🚴","🚌","🚊","🚈"]},2950:function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"task-list-item"},[i("span",{staticClass:"emoji"},[t._v(t._s(t.emoji[t.type]))]),i("div",{staticClass:"content-container"},[i("div",{staticClass:"primary"},[i("p",{staticClass:"title"},[t._v(t._s(t.title))]),i("integral",{attrs:{integral:t.integral}})],1),i("p",{staticClass:"description"},[t._v(t._s(t.description))]),i("div",{staticClass:"extra"},[i("span",{staticClass:"aim"},[t._v("目标: "+t._s(""+t.aim+t.unit))]),t._t("default")],2)])])},n=[],a=(i("a9e3"),i("cb09")),s=i("2393"),c={name:"TaskListItem",props:{title:{type:String,required:!0},description:{type:String,required:!0},aim:{type:Number,required:!0},type:{type:Number,required:!0},integral:{type:Number,required:!0}},data:function(){return{emoji:s["a"]}},components:{Integral:a["a"]},computed:{unit:function(){return 0===this.type?"km":"次"}}},o=c,u=(i("7f4c"),i("2877")),l=Object(u["a"])(o,r,n,!1,null,"1c82f2ab",null);e["a"]=l.exports},"2d59":function(t,e,i){"use strict";var r=i("a276"),n=i.n(r);n.a},3635:function(t,e,i){"use strict";var r=i("d7c1"),n=i.n(r);n.a},"3b72":function(t,e,i){"use strict";i("d3b7");e["a"]={data:function(){return{loading:!1}},methods:{scroll:function(){var t=this;this.loading=!0,this.getData().finally((function(){t.loading=!1}))}},mounted:function(){var t=this;this.list.length>0||this.finished||(this.loading=!0,this.getData().finally((function(){t.loading=!1})))}}},4160:function(t,e,i){"use strict";var r=i("23e7"),n=i("17c2");r({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"4de4":function(t,e,i){"use strict";var r=i("23e7"),n=i("b727").filter,a=i("1dde"),s=i("ae40"),c=a("filter"),o=s("filter");r({target:"Array",proto:!0,forced:!c||!o},{filter:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},"7f4c":function(t,e,i){"use strict";var r=i("af15"),n=i.n(r);n.a},"9c79":function(t,e,i){"use strict";var r=i("ee4b"),n=i.n(r);n.a},a276:function(t,e,i){},a623:function(t,e,i){"use strict";var r=i("23e7"),n=i("b727").every,a=i("a640"),s=i("ae40"),c=a("every"),o=s("every");r({target:"Array",proto:!0,forced:!c||!o},{every:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},af15:function(t,e,i){},b64b:function(t,e,i){var r=i("23e7"),n=i("7b0b"),a=i("df75"),s=i("d039"),c=s((function(){a(1)}));r({target:"Object",stat:!0,forced:c},{keys:function(t){return a(n(t))}})},b910:function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("scroll-view",{ref:"scroll",attrs:{dataSource:t.dataSource,probeType:3,click:!0},on:{scroll:t.scroll}},[i("div",{staticClass:"list-scroll-container"},[t._t("default"),t.dataSource.length>0?i("div",{staticClass:"end"},[i("van-divider",[t._v("我是有底线的")])],1):i("div",{staticClass:"empty"},[t._v("暂无相关数据")])],2)])},n=[],a=(i("a9e3"),i("b4e2")),s=i("6015"),c={name:"ListScrollView",mixins:[s["a"]],props:{loading:{type:Boolean,required:!1},finished:{type:Boolean,required:!0},interval:{type:Number,default:300}},components:{ScrollView:a["a"]},methods:{scroll:function(t){var e=t.el,i=t.y;if(!this.loading&&!this.finished){var r=e.offsetHeight,n=e.children[0].offsetHeight;i+n-r<=this.interval&&this.$emit("scroll")}},refresh:function(){this.$refs.scroll.refresh()}}},o=c,u=(i("9c79"),i("2877")),l=Object(u["a"])(o,r,n,!1,null,"98f7aad4",null);e["a"]=l.exports},c028:function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"common-header"},[i("router-link",{attrs:{to:t.to}},[i("span",{staticClass:"arrow"})]),i("h1",{staticClass:"title"},[t._v(t._s(t.title))])],1)},n=[],a={name:"CommonHeader",props:{title:{type:String,default:""},to:{type:String,default:"/"}}},s=a,c=(i("2d59"),i("2877")),o=Object(c["a"])(s,r,n,!1,null,"9002ea4a",null);e["a"]=o.exports},c430b:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"task-container"},[i("div",{staticClass:"header"},[i("common-header",{attrs:{to:"/",title:"任务列表"}})],1),i("list-scroll-view",{attrs:{dataSource:t.list,loading:t.loading,finished:t.finished,interval:400},on:{scroll:t.scroll}},[i("div",t._l(t.list,(function(e){return i("router-link",{key:e.id,attrs:{to:"/task/detail/"+e.id}},[i("task-list-item",{attrs:{id:e.id,title:e.title,description:e.description,aim:e.aim,type:e.type,integral:e.integral}},[i("div",{staticClass:"acquire",class:e.disabled?"disabled":"",on:{click:function(i){return i.preventDefault(),t.acquire(e)}}},[t._v("接任务")])])],1)})),1)]),t.loading?i("div",{staticClass:"loading"},[i("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1):t._e(),i("transition",{attrs:{name:"detail"}},[i("router-view")],1)],1)},n=[],a=(i("a4d3"),i("a623"),i("4de4"),i("7db0"),i("4160"),i("d81d"),i("e439"),i("dbb4"),i("b64b"),i("d3b7"),i("159b"),i("ade3")),s=i("bc3a"),c=i.n(s),o=i("2f62"),u=i("3b72"),l=i("c028"),d=i("b910"),f=i("2950"),p=i("d15c"),v=i("2788");function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function b(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){Object(a["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var g={name:"Task",mixins:[u["a"]],components:{CommonHeader:l["a"],ListScrollView:d["a"],TaskListItem:f["a"]},computed:b({},Object(o["c"])("user",{tasks:function(t){return t.tasks}}),{},Object(o["c"])("task",{list:function(t){return t.list},pageSize:function(t){return t.pageSize},currentPage:function(t){return t.currentPage},finished:function(t){return t.finished},condition:function(t){return t.condition}})),methods:b({getData:function(){var t=this;return c.a.get("/api/task/list",{params:b({pageSize:this.pageSize,currentPage:this.currentPage},this.condition)}).then((function(e){var i=e.data,r=i.code,n=i.data;0!==r?t.$notify({type:"danger",message:"请求数据失败！"}):t[p["b"]](n.map((function(e){return b({disabled:!!t.tasks.find((function(t){return t.id===e.id}))},e)})))}))},acquire:function(t){var e=this,i=t.id,r=t.disabled,n=t.type;if(!this.loading&&!r){var a=this.tasks.filter((function(t){return t.type===n}));a.every((function(t){return 1===t.status}))?(this.loading=!0,c.a.post("/api/task/acquire",{id:i}).then((function(t){var r=t.data,n=r.code,a=r.data;if(0===n)return e[p["c"]](i),void e[v["b"]](a);e.$notify({type:"danger",message:"操作失败！"})})).finally((function(){e.loading=!1}))):this.$toast("请先完成正在进行的同种类型任务！")}}},Object(o["b"])("task",[p["b"],p["c"]]),{},Object(o["b"])("user",[v["b"]]))},m=g,y=(i("3635"),i("2877")),O=Object(y["a"])(m,r,n,!1,null,"18143aca",null);e["default"]=O.exports},d7c1:function(t,e,i){},d81d:function(t,e,i){"use strict";var r=i("23e7"),n=i("b727").map,a=i("1dde"),s=i("ae40"),c=a("map"),o=s("map");r({target:"Array",proto:!0,forced:!c||!o},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(t,e,i){var r=i("23e7"),n=i("83ab"),a=i("56ef"),s=i("fc6a"),c=i("06cf"),o=i("8418");r({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(t){var e,i,r=s(t),n=c.f,u=a(r),l={},d=0;while(u.length>d)i=n(r,e=u[d++]),void 0!==i&&o(l,e,i);return l}})},e439:function(t,e,i){var r=i("23e7"),n=i("d039"),a=i("fc6a"),s=i("06cf").f,c=i("83ab"),o=n((function(){s(1)})),u=!c||o;r({target:"Object",stat:!0,forced:u,sham:!c},{getOwnPropertyDescriptor:function(t,e){return s(a(t),e)}})},ee4b:function(t,e,i){}}]);