(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e7f5321"],{"65cd":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"merchandise-detail-container"},[r("transition",{attrs:{name:"van-fade"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.header,expression:"header"}],staticClass:"header"},[r("router-link",{attrs:{to:"/merchandise"}},[r("div",{staticClass:"arrow-container"},[r("van-icon",{attrs:{name:"arrow-left"}})],1)]),r("h2",{staticClass:"title"},[e._v("商品详情")])],1)]),r("scroll-view",{ref:"scroll",attrs:{click:!0,probeType:3},on:{scroll:e.scroll}},[r("div",{staticClass:"scroll-contaienr"},[e.merchandise?r("merchandise-detail-card",{attrs:{merchandise:e.merchandise},on:{conversion:e.conversion}}):e._e(),e.others.length>0?r("div",[r("van-divider",{style:{color:"#222"}},[e._v("看了又看")]),r("div",{staticClass:"list-container"},[r("merchandise-list",{attrs:{list:e.others}})],1)],1):e._e()],1)]),r("router-link",{attrs:{to:"/merchandise"}},[r("div",{staticClass:"arrow-container"},[r("van-icon",{attrs:{name:"arrow-left"}})],1)])],1)},i=[],a=(r("a4d3"),r("4de4"),r("7db0"),r("4160"),r("a434"),r("e439"),r("dbb4"),r("b64b"),r("159b"),r("ade3")),s=r("bc3a"),c=r.n(s),o=r("2f62"),l=r("b4e2"),d=r("0d03"),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"merchandise-detail-card"},[r("div",{staticClass:"image-container"},[r("van-image",{staticClass:"image",attrs:{src:e.merchandise.path}})],1),r("div",{staticClass:"content-container"},[r("p",{staticClass:"name"},[e._v(e._s(e.merchandise.name))]),r("p",{staticClass:"description"},[e._v(e._s(e.merchandise.description))]),r("div",{staticClass:"integral-container"},[r("div",{staticClass:"integral"},[r("i",{staticClass:"icon icon-tubiao311 iconfont"}),r("span",{staticClass:"pre-integral"},[e._v(e._s(e._f("preIntegral")(e.merchandise.integral)))]),r("span",{staticClass:"last-integral"},[e._v(e._s(e._f("lastIntegral")(e.merchandise.integral)))])]),e.merchandise.stock?r("van-button",{attrs:{disabled:e.loading,type:"primary",size:"small"},on:{click:e.conversion}},[e._v("兑换")]):e._e(),0===e.merchandise.stock?r("van-tag",{attrs:{plain:"",type:"danger"}},[e._v("已售馨")]):e._e()],1)])])},f=[],h=(r("d3b7"),r("ac1f"),r("1276"),r("3835")),p=r("2788");function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b={name:"MerchandiseDetailCard",props:{merchandise:{type:Object,required:!0}},data:function(){return{loading:!1}},computed:v({},Object(o["d"])("user",{user:function(e){return e}})),filters:{preIntegral:function(e){return parseInt(e,10)},lastIntegral:function(e){var t="".concat(e).split("."),r=Object(h["a"])(t,2),n=r[1];return n?".".concat(n):""}},methods:v({conversion:function(){var e=this;this.user.integral<=this.merchandise.integral?this.$toast({type:"fail",message:"积分不足！"}):this.loading||(this.loading=!0,c.a.post("/api/merchandise/conversion",{id:this.merchandise.id}).then((function(t){var r=t.data.code;0===r?(e.$notify({type:"success",message:"兑换成功！"}),e[p["b"]]({integral:e.merchandise.integral,operator:"-"}),e.$emit("conversion")):e.$notify({type:"danger",message:"兑换失败！"})})).finally((function(){e.loading=!1})))}},Object(o["c"])("user",[p["b"]]))},g=b,O=(r("fa7a"),r("2877")),y=Object(O["a"])(g,u,f,!1,null,"43277e37",null),j=y.exports;function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){Object(a["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _={name:"MerchandiseDetail",data:function(){return{header:!1,merchandise:null}},watch:{list:function(){this.$refs.scroll.refresh()},$route:function(e){var t=e.params.id;this.merchandise=this.list.find((function(e){return e.id===+t})),this.$refs.scroll.scrollTo(0,0)}},computed:C({others:function(){var e=this.$route.params.id;return this.list.filter((function(t){return t.id!==+e})).splice(0,5)}},Object(o["d"])("merchandise",{list:function(e){return e.list}}),{},Object(o["d"])("user",{user:function(e){return e}})),components:{MerchandiseList:d["a"],MerchandiseDetailCard:j,ScrollView:l["a"]},methods:{scroll:function(e){var t=e.y;this.header=t<=-80},conversion:function(){this.merchandise.stock-=1}},mounted:function(){var e=this,t=this.$route.params.id;this.merchandise=this.list.find((function(e){return e.id===+t})),this.merchandise?this.$refs.scroll.refresh():c.a.get("/api/merchandise/find",{params:{id:+t}}).then((function(t){var r=t.data,n=r.code,i=r.data;if(0===n)return e.merchandise=i,void e.$refs.scroll.refresh();e.$notify({type:"danger",message:"数据请求失败"})}))}},P=_,$=(r("9d98"),Object(O["a"])(P,n,i,!1,null,"3c12fdb1",null));t["default"]=$.exports},9055:function(e,t,r){},"93cc":function(e,t,r){},"9d98":function(e,t,r){"use strict";var n=r("93cc"),i=r.n(n);i.a},a434:function(e,t,r){"use strict";var n=r("23e7"),i=r("23cb"),a=r("a691"),s=r("50c4"),c=r("7b0b"),o=r("65f0"),l=r("8418"),d=r("1dde"),u=r("ae40"),f=d("splice"),h=u("splice",{ACCESSORS:!0,0:0,1:2}),p=Math.max,m=Math.min,v=9007199254740991,b="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!f||!h},{splice:function(e,t){var r,n,d,u,f,h,g=c(this),O=s(g.length),y=i(e,O),j=arguments.length;if(0===j?r=n=0:1===j?(r=0,n=O-y):(r=j-2,n=m(p(a(t),0),O-y)),O+r-n>v)throw TypeError(b);for(d=o(g,n),u=0;u<n;u++)f=y+u,f in g&&l(d,u,g[f]);if(d.length=n,r<n){for(u=y;u<O-n;u++)f=u+n,h=u+r,f in g?g[h]=g[f]:delete g[h];for(u=O;u>O-n+r;u--)delete g[u-1]}else if(r>n)for(u=O-n;u>y;u--)f=u+n-1,h=u+r-1,f in g?g[h]=g[f]:delete g[h];for(u=0;u<r;u++)g[u+y]=arguments[u+2];return g.length=O-n+r,d}})},fa7a:function(e,t,r){"use strict";var n=r("9055"),i=r.n(n);i.a}}]);