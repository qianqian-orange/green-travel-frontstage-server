(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-726d975f"],{"159b":function(t,e,r){var a=r("da84"),i=r("fdbc"),n=r("17c2"),s=r("9112");for(var c in i){var o=a[c],u=o&&o.prototype;if(u&&u.forEach!==n)try{s(u,"forEach",n)}catch(l){u.forEach=n}}},"17c2":function(t,e,r){"use strict";var a=r("b727").forEach,i=r("a640"),n=r("ae40"),s=i("forEach"),c=n("forEach");t.exports=s&&c?[].forEach:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}},2393:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var a=["🚴","🚌","🚊","🚈"]},2950:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"task-list-item"},[r("span",{staticClass:"emoji"},[t._v(t._s(t.emoji[t.type]))]),r("div",{staticClass:"content-container"},[r("div",{staticClass:"primary"},[r("p",{staticClass:"title"},[t._v(t._s(t.title))]),r("integral",{attrs:{integral:t.integral}})],1),r("p",{staticClass:"description"},[t._v(t._s(t.description))]),r("div",{staticClass:"extra"},[r("span",{staticClass:"aim"},[t._v("目标: "+t._s(""+t.aim+t.unit))]),t._t("default")],2)])])},i=[],n=(r("a9e3"),r("cb09")),s=r("2393"),c={name:"TaskListItem",props:{title:{type:String,required:!0},description:{type:String,required:!0},aim:{type:Number,required:!0},type:{type:Number,required:!0},integral:{type:Number,required:!0}},data:function(){return{emoji:s["a"]}},components:{Integral:n["a"]},computed:{unit:function(){return 0===this.type?"km":"次"}}},o=c,u=(r("7f4c"),r("2877")),l=Object(u["a"])(o,a,i,!1,null,"1c82f2ab",null);e["a"]=l.exports},"2d59":function(t,e,r){"use strict";var a=r("a276"),i=r.n(a);i.a},4160:function(t,e,r){"use strict";var a=r("23e7"),i=r("17c2");a({target:"Array",proto:!0,forced:[].forEach!=i},{forEach:i})},"4de4":function(t,e,r){"use strict";var a=r("23e7"),i=r("b727").filter,n=r("1dde"),s=r("ae40"),c=n("filter"),o=s("filter");a({target:"Array",proto:!0,forced:!c||!o},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"7f4c":function(t,e,r){"use strict";var a=r("af15"),i=r.n(a);i.a},"84c8":function(t,e,r){"use strict";var a=r("af01"),i=r.n(a);i.a},"9c79":function(t,e,r){"use strict";var a=r("ee4b"),i=r.n(a);i.a},a276:function(t,e,r){},af01:function(t,e,r){},af15:function(t,e,r){},b64b:function(t,e,r){var a=r("23e7"),i=r("7b0b"),n=r("df75"),s=r("d039"),c=s((function(){n(1)}));a({target:"Object",stat:!0,forced:c},{keys:function(t){return n(i(t))}})},b910:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("scroll-view",{ref:"scroll",attrs:{dataSource:t.dataSource,probeType:3,click:!0},on:{scroll:t.scroll}},[r("div",{staticClass:"list-scroll-container"},[t._t("default"),t.dataSource.length>0?r("div",{staticClass:"end"},[r("van-divider",[t._v("我是有底线的")])],1):r("div",{staticClass:"empty"},[t._v("暂无相关数据")])],2)])},i=[],n=(r("a9e3"),r("b4e2")),s=r("6015"),c={name:"ListScrollView",mixins:[s["a"]],props:{loading:{type:Boolean,required:!1},finished:{type:Boolean,required:!0},interval:{type:Number,default:300}},components:{ScrollView:n["a"]},methods:{scroll:function(t){var e=t.el,r=t.y;if(!this.loading&&!this.finished){var a=e.offsetHeight,i=e.children[0].offsetHeight;r+i-a<=this.interval&&this.$emit("scroll")}},refresh:function(){this.$refs.scroll.refresh()}}},o=c,u=(r("9c79"),r("2877")),l=Object(u["a"])(o,a,i,!1,null,"98f7aad4",null);e["a"]=l.exports},c028:function(t,e,r){"use strict";var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"common-header"},[r("router-link",{attrs:{to:t.to}},[r("span",{staticClass:"arrow"})]),r("h1",{staticClass:"title"},[t._v(t._s(t.title))])],1)},i=[],n={name:"CommonHeader",props:{title:{type:String,default:""},to:{type:String,default:"/"}}},s=n,c=(r("2d59"),r("2877")),o=Object(c["a"])(s,a,i,!1,null,"9002ea4a",null);e["a"]=o.exports},d81d:function(t,e,r){"use strict";var a=r("23e7"),i=r("b727").map,n=r("1dde"),s=r("ae40"),c=n("map"),o=s("map");a({target:"Array",proto:!0,forced:!c||!o},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(t,e,r){var a=r("23e7"),i=r("83ab"),n=r("56ef"),s=r("fc6a"),c=r("06cf"),o=r("8418");a({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,r,a=s(t),i=c.f,u=n(a),l={},f=0;while(u.length>f)r=i(a,e=u[f++]),void 0!==r&&o(l,e,r);return l}})},ded2:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"my-task-container fullscreen-fixed-container"},[r("div",{staticClass:"header"},[r("common-header",{attrs:{to:"/me",title:"我的任务"}}),r("span",{staticClass:"refresh",on:{click:t.taskCheckCore}},[r("i",{staticClass:"iconfont icon-shuaxin2"})])],1),r("list-scroll-view",{attrs:{dataSource:t.tasks,finished:!0}},[r("div",t._l(t.tasks,(function(e){return r("router-link",{key:e.id,attrs:{to:"/me/task/detail/"+e.id}},[r("task-list-item",{attrs:{id:e.id,title:e.title,description:e.description,aim:e.aim,type:e.type,integral:e.integral}},[r("div",{staticClass:"acquire",on:{click:function(r){return r.preventDefault(),t.acquire(e)}}},[t._v(" "+t._s(0===e.status?"进行中":0===e.acquire?"可领取":"已领取")+" ")])])],1)})),1)]),t.loading?r("div",{staticClass:"loading"},[r("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1):t._e(),r("transition",{attrs:{name:"detail"}},[r("router-view")],1)],1)},i=[],n=(r("a4d3"),r("4de4"),r("7db0"),r("4160"),r("d81d"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("3ca3"),r("159b"),r("ddb0"),r("ade3")),s=r("bc3a"),c=r.n(s),o=r("2f62"),u=r("c028"),l=r("b910"),f=r("2950"),d=r("2788");function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(Object(r),!0).forEach((function(e){Object(n["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var h={name:"MyTask",data:function(){return{loading:!1}},components:{CommonHeader:u["a"],ListScrollView:l["a"],TaskListItem:f["a"]},computed:v({},Object(o["c"])("user",{tasks:function(t){return t.tasks}})),methods:v({acquire:function(t){var e=this,r=t.status,a=t.acquire,i=t.id;0!==r&&1!==a&&(this.loading=!0,c.a.post("/api/user/taskAcquire",{id:i}).then((function(t){var r=t.data,a=r.code,n=r.data;0!==a?e.$notify({type:"danger",message:"领取奖励失败！"}):e[d["a"]](v({id:i},n))})).finally((function(){e.loading=!1})))},taskCheck:function(t){var e=this;return this.tasks.find((function(e){return e.type===t&&0===e.status}))?c.a.post("/api/user/taskCheck",{type:t}).then((function(t){var r=t.data.code;0!==r&&e.$notify({type:"danger",message:"更新任务进度失败！"})})):Promise.resolve()},taskCheckCore:function(){var t=this,e=[0,1,2,3];Promise.all(e.map((function(e){return t.taskCheck(e)}))).then((function(){c.a.get("/api/user/taskList").then((function(e){var r=e.data,a=r.code,i=r.data;0!==a?t.$notify({type:"danger",message:"请求数据失败！"}):t[d["i"]](i)}))}))}},Object(o["b"])("user",[d["i"],d["a"]])),mounted:function(){this.taskCheckCore()}},m=h,b=(r("84c8"),r("2877")),y=Object(b["a"])(m,a,i,!1,null,"4954345d",null);e["default"]=y.exports},e439:function(t,e,r){var a=r("23e7"),i=r("d039"),n=r("fc6a"),s=r("06cf").f,c=r("83ab"),o=i((function(){s(1)})),u=!c||o;a({target:"Object",stat:!0,forced:u,sham:!c},{getOwnPropertyDescriptor:function(t,e){return s(n(t),e)}})},ee4b:function(t,e,r){}}]);