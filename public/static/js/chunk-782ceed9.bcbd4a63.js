(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-782ceed9"],{1506:function(t,e,a){"use strict";var n=a("4a60"),r=a.n(n);r.a},"4a60":function(t,e,a){},"65eb":function(t,e,a){"use strict";var n=a("e919"),r=a.n(n);r.a},"7d63":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"public-welfare-detail fullscreen-fixed-container"},[a("scroll-header",{attrs:{to:t.to}}),t.target?a("public-welfare-card",{attrs:{target:t.target}}):t._e(),a("van-divider",{style:{color:"#222"}},[t._v("捐赠排名")]),a("div",{staticClass:"ank-list-container"},[a("list-scroll-view",{attrs:{dataSource:t.ranks,loading:t.loading,finished:t.finished,interval:400},on:{scroll:t.scroll}},[a("rank",{attrs:{list:t.ranks}})],1)],1),t.loading?a("div",{staticClass:"loading"},[a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1):t._e()],1)},r=[],i=(a("a4d3"),a("99af"),a("4de4"),a("7db0"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("d3b7"),a("ac1f"),a("5319"),a("159b"),a("ade3")),s=a("bc3a"),c=a.n(s),o=a("2f62"),l=a("e762"),u=a("b910"),d=a("7d74"),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"public-welfare-card-container"},[a("div",{staticClass:"image-container"},[a("van-image",{staticClass:"image",attrs:{src:t.target.path}})],1),a("div",{staticClass:"content-container"},[a("p",{staticClass:"title"},[t._v(t._s(t.target.title))]),a("p",{staticClass:"description"},[t._v(t._s(t.target.description))]),a("div",{staticClass:"extra"},[a("div",{staticClass:"integral"},[a("span",{staticClass:"current"},[t._v(t._s(t.target.donate))]),t._v(" / "),a("span",{staticClass:"total"},[t._v(t._s(t.target.integral))])]),a("span",[t._v(t._s(t.target.name))])]),t.overdue?a("div",{staticClass:"donate"},[a("van-stepper",{attrs:{integer:""},model:{value:t.quantity,callback:function(e){t.quantity=e},expression:"quantity"}}),a("van-button",{staticClass:"button",attrs:{disabled:t.loading,type:"primary",size:"small"},on:{click:t.donate}},[t._v("捐赠")])],1):t._e()])])},p=[],g=a("2788");function b(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function v(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?b(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var h={name:"PublicWelfareCard",props:{target:{type:Object,required:!0}},data:function(){return{quantity:1,loading:!1}},computed:v({},Object(o["c"])("user",{user:function(t){return t}}),{overdue:function(){var t=new Date,e=new Date(this.target.end_time);return e>t}}),methods:v({donate:function(){var t=this;this.user.integral<this.quantity?this.$toast("积分不足！"):(this.loading=!0,c.a.post("/api/publicWelfare/donate",{integral:this.quantity,id:this.target.id}).then((function(e){var a=e.data.code;if(0===a)return t.$notify({type:"success",message:"捐赠成功！"}),t.target.donate+=t.quantity,void t[g["e"]](t.quantity);t.$notify({type:"danger",message:"捐赠失败！"})})).finally((function(){t.loading=!1})))}},Object(o["b"])("user",[g["e"]]))},y=h,O=(a("65eb"),a("2877")),m=Object(O["a"])(y,f,p,!1,null,"45e03800",null),j=m.exports;function w(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function P(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?w(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var _={name:"PublicWelfareDetail",data:function(){return{target:null,to:"/publicWelfare",loading:!1,ranks:[],currentPage:1,pageSize:10,finished:!1}},components:{ScrollHeader:l["a"],PublicWelfareCard:j,ListScrollView:u["a"],Rank:d["a"]},computed:P({},Object(o["c"])("publicWelfare",{list:function(t){return t.list}})),methods:{getRank:function(){var t=this;return this.loading=!0,c.a.get("/api/publicWelfare/rank",{params:{id:this.target.id,pageSize:this.pageSize,currentPage:this.currentPage}}).then((function(e){var a=e.data,n=a.code,r=a.data;if(0===n)return t.ranks=t.ranks.concat(r),t.currentPage+=1,void(0===r.length&&(t.finished=!0));t.$notify({type:"danger",message:"请求数据失败！"})})).finally((function(){t.loading=!1}))},scroll:function(){var t=this;this.loading=!0,this.getRank().finally((function(){t.loading=!1}))}},mounted:function(){var t=this,e=this.$route.params.id;this.target=this.list.find((function(t){return t.id===+e})),this.target?this.getRank():(this.loading=!0,c.a.get("/api/publicWelfare/find",{params:{id:+e}}).then((function(e){var a=e.data,n=a.code,r=a.data;if(0===n)return t.target=r,void t.getRank();t.$router.replace(t.to),t.$notify({type:"danger",message:"数据请求失败"})})).finally((function(){t.loading=!1})))}},k=_,C=(a("1506"),Object(O["a"])(k,n,r,!1,null,"4d6bac29",null));e["default"]=C.exports},e919:function(t,e,a){}}]);